!function(a){"use strict";function b(){f(),g(),h(),i(),j(),m()}function c(){}function d(){}function e(){}function f(){var b=a("audio.mkd-blog-audio");b.mediaelementplayer({audioWidth:"100%"})}function g(){if(a(".mkd-blog-holder.mkd-blog-type-masonry").length){var b=a(".mkd-blog-holder.mkd-blog-type-masonry");b.isotope({itemSelector:"article",resizable:!1,masonry:{columnWidth:".mkd-blog-masonry-grid-sizer",gutter:".mkd-blog-masonry-grid-gutter"}});var c=a(".mkd-filter-blog-holder");a(".mkd-filter").click(function(){var d=a(this),e=d.attr("data-filter");return c.find(".mkd-active").removeClass("mkd-active"),d.addClass("mkd-active"),b.isotope({filter:e}),!1}),b.waitForImages(function(){b.animate({opacity:"1"},300,function(){b.isotope().isotope("layout")})})}}function h(){if(a(".mkd-blog-holder.mkd-blog-type-masonry").length){var b=a(".mkd-blog-holder.mkd-blog-type-masonry");if(b.hasClass("mkd-masonry-pagination-infinite-scroll"))b.infinitescroll({navSelector:".mkd-blog-infinite-scroll-button",nextSelector:".mkd-blog-infinite-scroll-button a",itemSelector:"article",loading:{finishedMsg:mkdGlobalVars.vars.mkdFinishedMessage,msgText:mkdGlobalVars.vars.mkdMessage}},function(c){b.append(c).isotope("appended",a(c)),mkd.modules.blog.mkdInitAudioPlayer(),mkd.modules.common.mkdOwlSlider(),mkd.modules.common.mkdFluidVideo(),setTimeout(function(){b.isotope("layout")},400)});else if(b.hasClass("mkd-masonry-pagination-load-more")){var c=1;a(".mkd-blog-load-more-button a").on("click",function(d){d.preventDefault();var e=a(this),f=e.attr("href"),g=".mkd-masonry-pagination-load-more",h=".mkd-blog-load-more-button a",i=a(h).attr("href");a.get(f+"",function(d){var f=a(g,d).wrapInner("").html();i=a(h,d).attr("href"),b.append(f).isotope("reloadItems").isotope({sortBy:"original-order"}),mkd.modules.blog.mkdInitAudioPlayer(),mkd.modules.common.mkdOwlSlider(),mkd.modules.common.mkdFluidVideo(),setTimeout(function(){a(".mkd-masonry-pagination-load-more").isotope("layout")},400),e.parent().data("rel")>c?e.attr("href",i):e.parent().remove()}),c++})}}}function i(){if(a(".mkd-blog-holder.mkd-blog-type-masonry-gallery").length){k(a(".mkd-blog-masonry-gallery-grid-sizer").width());var b=a(".mkd-blog-holder.mkd-blog-type-masonry-gallery");b.width(Math.round(b.parent().width())),b.isotope({itemSelector:"article",resizable:!1,layoutMode:"packery",packery:{columnWidth:".mkd-blog-masonry-gallery-grid-sizer",gutter:".mkd-blog-masonry-gallery-grid-gutter"}});var c=a(".mkd-filter-blog-holder");a(".mkd-filter").click(function(){var d=a(this),e=d.attr("data-filter");return c.find(".mkd-active").removeClass("mkd-active"),d.addClass("mkd-active"),b.isotope({filter:e}),!1}),b.waitForImages(function(){b.animate({opacity:"1"},300,function(){b.isotope().isotope("layout")})}),a(window).resize(function(){k(a(".mkd-blog-masonry-gallery-grid-sizer").width()),b.isotope().isotope("layout"),b.width(Math.round(b.parent().width()))})}}function j(){var b=a(".mkd-blog-holder.mkd-blog-type-masonry-gallery");b.length&&(b.each(function(){var b=a(".mkd-blog-holder.mkd-blog-type-masonry-gallery");b.find("article");if(b.hasClass("mkd-masonry-pagination-load-more")){var c=1;a(".mkd-blog-load-more-button a").on("click",function(d){d.preventDefault();var e=a(this),f=e.find(".mkd-btn-text").text(),g=e.attr("href"),h=".mkd-masonry-pagination-load-more",i=".mkd-blog-load-more-button a",j=a(i).attr("href");e.find(".mkd-btn-text").text("Loading"),a.get(g+"",function(d){var g=a(h,d).wrapInner("").html();j=a(i,d).attr("href"),b.append(g).isotope("reloadItems").isotope({sortBy:"original-order"}),mkd.modules.blog.mkdInitAudioPlayer(),mkd.modules.common.mkdOwlSlider(),mkd.modules.common.mkdFluidVideo(),k(a(".mkd-blog-masonry-gallery-grid-sizer").width()),setTimeout(function(){a(".mkd-masonry-pagination-load-more").isotope("layout"),l(b,200),e.find(".mkd-btn-text").text(f)},400),e.parent().data("rel")>c?e.attr("href",j):e.parent().remove()}),c++})}else b.hasClass("mkd-masonry-pagination-infinite-scroll")&&b.infinitescroll({navSelector:".mkd-blog-infinite-scroll-button",nextSelector:".mkd-blog-infinite-scroll-button a",itemSelector:"article",loading:{finishedMsg:mkdGlobalVars.vars.mkdFinishedMessage,msgText:mkdGlobalVars.vars.mkdMessage}},function(c){b.append(c).isotope("appended",a(c)),mkd.modules.blog.mkdInitAudioPlayer(),mkd.modules.common.mkdOwlSlider(),mkd.modules.common.mkdFluidVideo(),k(a(".mkd-blog-masonry-gallery-grid-sizer").width()),setTimeout(function(){b.isotope("layout")},400)})}),a(window).resize(function(){k(a(".mkd-blog-masonry-gallery-grid-sizer").width()),mkd.modules.common.mkdOwlSlider()}))}function k(b){var c=a(".mkd-blog-holder.mkd-blog-type-masonry-gallery .mkd-post-size-large-height"),d=a(".mkd-blog-holder.mkd-blog-type-masonry-gallery .mkd-post-size-large-width"),e=a(".mkd-blog-holder.mkd-blog-type-masonry-gallery .mkd-post-size-large-width-height"),f=a(".mkd-blog-holder.mkd-blog-type-masonry-gallery .mkd-post-size-square");c.css("height",2*b),d.css("height",b),e.css("height",2*b),e.width()<600&&e.css("height",e.width()),f.css("height",b)}function l(b,c){var d=b.find("article:not(.mkd-appeared)");if(d.length){var e=6,f=0;d.each(function(b){var c=a(this);setTimeout(function(){c.appear(function(){f++,f==e&&(f=0),setTimeout(function(){c.addClass("mkd-appeared")},120*f)},{accX:0,accY:0})},30)})}}function m(){var b=a(".mkd-blog-holder.mkd-blog-load-more:not(.mkd-blog-type-masonry)");b.length&&b.each(function(){var b,c,d=a(this),e=d.find(".mkd-load-more-ajax-pagination .mkd-btn");c=d.data("max-pages"),e.on("click",function(f){f.preventDefault(),f.stopPropagation();var g=n(d);if(b=g.nextPage,b<=c){var h=o(g);a.ajax({type:"POST",data:h,url:MikadoAjaxUrl,success:function(c){b++,d.data("next-page",b);var e=a.parseJSON(c),f=e.html;d.waitForImages(function(){d.find("article:last").after(f),setTimeout(function(){mkd.modules.blog.mkdInitAudioPlayer(),mkd.modules.common.mkdOwlSlider(),mkd.modules.common.mkdFluidVideo()},400)})}})}b===c&&e.hide()})})}function n(a){var b={};return b.nextPage="",b.number="",b.category="",b.blogType="",b.archiveCategory="",b.archiveAuthor="",b.archiveTag="",b.archiveDay="",b.archiveMonth="",b.archiveYear="","undefined"!=typeof a.data("next-page")&&a.data("next-page")!==!1&&(b.nextPage=a.data("next-page")),"undefined"!=typeof a.data("post-number")&&a.data("post-number")!==!1&&(b.number=a.data("post-number")),"undefined"!=typeof a.data("category")&&a.data("category")!==!1&&(b.category=a.data("category")),"undefined"!=typeof a.data("blog-type")&&a.data("blog-type")!==!1&&(b.blogType=a.data("blog-type")),"undefined"!=typeof a.data("archive-category")&&a.data("archive-category")!==!1&&(b.archiveCategory=a.data("archive-category")),"undefined"!=typeof a.data("archive-author")&&a.data("archive-author")!==!1&&(b.archiveAuthor=a.data("archive-author")),"undefined"!=typeof a.data("archive-tag")&&a.data("archive-tag")!==!1&&(b.archiveTag=a.data("archive-tag")),"undefined"!=typeof a.data("archive-day")&&a.data("archive-day")!==!1&&(b.archiveDay=a.data("archive-day")),"undefined"!=typeof a.data("archive-month")&&a.data("archive-month")!==!1&&(b.archiveMonth=a.data("archive-month")),"undefined"!=typeof a.data("archive-year")&&a.data("archive-year")!==!1&&(b.archiveYear=a.data("archive-year")),b}function o(a){var b={action:"hotspot_mikado_blog_load_more",nextPage:a.nextPage,number:a.number,category:a.category,blogType:a.blogType,archiveCategory:a.archiveCategory,archiveAuthor:a.archiveAuthor,archiveTag:a.archiveTag,archiveDay:a.archiveDay,archiveMonth:a.archiveMonth,archiveYear:a.archiveYear};return b}var p={};mkd.modules.blog=p,p.mkdInitAudioPlayer=f,p.mkdOnDocumentReady=b,p.mkdOnWindowLoad=c,p.mkdOnWindowResize=d,p.mkdOnWindowScroll=e,a(document).ready(b),a(window).load(c),a(window).resize(d),a(window).scroll(e)}(jQuery);